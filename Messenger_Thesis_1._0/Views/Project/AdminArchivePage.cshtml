@model List<Project>

@using Messenger_Thesis_1._0.Data.Model.Interface
@inject IContractRepository ContractRepository
@inject IUserRepository UserRepository
@{
    ViewData["Title"] = "Project";
    Layout = "~/Views/Shared/_Admin.cshtml";
}


<div class="modal fade" id="modal-form" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true">
    <div class="modal-dialog modal- modal-dialog-centered modal-lg" role="document">


        <div class="modal-content">
            <div id="RegistrationForm">
                <div class="modal-body p-0">


                    <div class="card bg-secondary shadow border-0">
                        <div class="card-header bg-white pb-3">

                            <div class="btn-wrapper text-center">
                                <h3>List Of SOA</h3>

                            </div>
                            <form asp-action="Invoice" asp-controller="Report">
                                <input type="hidden" id="projectId" name="id" />
                                <input type="submit" class="btn btn-primary" value="Show Invoice" />
                            </form>
                        </div>
                        <div class="card-body px-lg-5 py-lg-3">

                            <form role="form" asp-controller="Client" asp-action="ReadExcelFileAsync" enctype="multipart/form-data">



                                <div class="table-responsive">
                                    <table id="soaTable" class="table align-items-center table-flush">
                                        <thead class="thead-light">
                                            <tr>
                                                <th scope="col">Receiver Name</th>
                                                <th scope="col">Location</th>
                                            </tr>
                                        </thead>
                                        <tbody class="letterData">
                                        </tbody>
                                    </table>
                                </div>




                                <br />
                                <br />


                            </form>
                        </div>
                    </div>



                </div>

            </div>



        </div>
    </div>
</div>




<div class="container-fluid mt--7">
    <!-- Table -->
    <div class="row">
        <div class="col">
            <div class="card shadow">
                <br />
                <div class="col-md-3">









                    <div class="modal fade" id="modal-delivery" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true">
                        <div class="modal-dialog modal- modal-dialog-centered modal-sm" role="document">


                            <div class="modal-content">
                                <div id="Delivery">
                                    <div class="modal-body p-0">


                                        <div class="card bg-secondary shadow border-0">
                                            <div class="card-header bg-white pb-3">

                                                <div class="btn-wrapper text-center">
                                                    <h3>Delivery</h3>

                                                </div>
                                            </div>
                                            <div class="card-body px-lg-5 py-lg-3">


                                                <form role="form" id="d_messenger_form" enctype="multipart/form-data">

                                                    <label>For Delivery</label>

                                                    <input type="text" readonly class="form-control" id="d_projectid" />
                                                    <br />
                                                    <label>Messengers</label>
                                                    <select name="messenger" id="d_messenger" class="form-control">
                                                        @{
                                                            foreach (var m in UserRepository.GetAll().Where(a => a.Role == "Messenger").ToList())
                                                            {
                                                                <option value="@m.UserID">@m.FirstName @m.MiddleName  @m.LastName  </option>
                                                            }
                                                        }
                                                    </select>

                                                    <br />
                                                    <label>Quantity</label>
                                                    <input type="number" readonly id="d_quantity" class="form-control" />

                                                    <br />
                                                    <select class="form-control" name="cities" id="d_location">
                                                        <option value="Caloocan">Caloocan</option>
                                                        <option value="Las Piñas">Las Piñas</option>
                                                        <option value="Makati ">Makati </option>
                                                        <option value="Malabon">Malabon</option>
                                                        <option value="Mandaluyong">Mandaluyong</option>
                                                        <option value="Manila">Manila</option>
                                                        <option value="Marikina">Marikina</option>
                                                        <option value="Muntinlupa">Muntinlupa</option>
                                                        <option value="Navotas">Navotas</option>
                                                        <option value="Parañaque">Parañaque</option>
                                                        <option value="Pasay">Pasay</option>
                                                        <option value="Pasig ">Pasig </option>
                                                        <option value="Quezon City">Quezon City</option>
                                                        <option value="San Juan">San Juan</option>
                                                        <option value="Taguig">Taguig</option>
                                                        <option value="Valenzuela">Valenzuela</option>
                                                        <option value="Butuan">Butuan</option>
                                                        <option value="Cabadbaran">Cabadbaran</option>
                                                        <option value="Bayugan">Bayugan</option>
                                                        <option value="Legazpi">Legazpi</option>
                                                        <option value="Ligao">Ligao</option>
                                                        <option value="Tabaco">Tabaco</option>
                                                        <option value="Isabela">Isabela</option>
                                                        <option value="Lamitan">Lamitan</option>
                                                        <option value="Balanga">Balanga</option>
                                                        <option value="Batangas City">Batangas City</option>
                                                        <option value="Lipa">Lipa</option>
                                                        <option value="Tanauan">Tanauan</option>
                                                        <option value="Baguio">Baguio</option>
                                                        <option value="Tagbilaran">Tagbilaran</option>
                                                        <option value="Malaybalay">Malaybalay</option>
                                                        <option value="Valencia">Valencia</option>
                                                        <option value="Malolos">Malolos</option>
                                                        <option value="Meycauayan">Meycauayan</option>
                                                        <option value="San Jose del Monte">San Jose del Monte</option>
                                                        <option value="Tuguegarao">Tuguegarao</option>
                                                        <option value="Iriga">Iriga</option>
                                                        <option value="Naga">Naga</option>
                                                        <option value="Roxas">Roxas</option>
                                                        <option value="Bacoor">Bacoor</option>
                                                        <option value="Cavite City">Cavite City</option>
                                                        <option value="Dasmariñas">Dasmariñas</option>
                                                        <option value="Imus">Imus</option>
                                                        <option value="Tagaytay">Tagaytay</option>
                                                        <option value="Trece Martires">Trece Martires</option>
                                                        <option value="Bogo">Bogo</option>
                                                        <option value="Carcar">Carcar</option>
                                                        <option value="Cebu City">Cebu City</option>
                                                        <option value="Danao">Danao</option>
                                                        <option value="Lapu-Lapu">Lapu-Lapu</option>
                                                        <option value="Mandaue">Mandaue</option>
                                                        <option value="Naga">Naga</option>
                                                        <option value="Talisay">Talisay</option>
                                                        <option value="Toledo">Toledo</option>
                                                        <option value="Kidapawan">Kidapawan</option>
                                                        <option value="Panabo">Panabo</option>
                                                        <option value="Samal">Samal</option>
                                                        <option value="Tagum">Tagum</option>
                                                        <option value="Davao City">Davao City</option>
                                                        <option value="Digos">Digos</option>
                                                        <option value="Mati">Mati</option>
                                                        <option value="Borongan">Borongan</option>
                                                        <option value="Batac">Batac</option>
                                                        <option value="Laoag">Laoag</option>
                                                        <option value="Candon">Candon</option>
                                                        <option value="Vigan">Vigan</option>
                                                        <option value="Iloilo City">Iloilo City</option>
                                                        <option value="Passi">Passi</option>
                                                        <option value="Cauayan">Cauayan</option>
                                                        <option value="Ilagan">Ilagan</option>
                                                        <option value="Santiago">Santiago</option>
                                                        <option value="Tabuk">Tabuk</option>
                                                        <option value="San Fernando">San Fernando</option>
                                                        <option value="Biñan">Biñan</option>
                                                        <option value="Cabuyao">Cabuyao</option>
                                                        <option value="Calamba">Calamba</option>
                                                        <option value="San Pablo">San Pablo</option>
                                                        <option value="Santa Rosa">Santa Rosa</option>
                                                        <option value="San Pedro">San Pedro</option>
                                                        <option value="Iligan">Iligan</option>
                                                        <option value="Marawi">Marawi</option>
                                                        <option value="Baybay">Baybay</option>
                                                        <option value="Ormoc">Ormoc</option>
                                                        <option value="Tacloban">Tacloban</option>
                                                        <option value="Cotabato City">Cotabato City</option>
                                                        <option value="Masbate City">Masbate City</option>
                                                        <option value="Oroquieta">Oroquieta</option>
                                                        <option value="Ozamiz">Ozamiz</option>
                                                        <option value="Tangub">Tangub</option>
                                                        <option value="Cagayan de Oro">Cagayan de Oro</option>
                                                        <option value="El Salvador">El Salvador</option>
                                                        <option value="Gingoog">Gingoog</option>
                                                        <option value="Bacolod">Bacolod</option>
                                                        <option value="Bago">Bago</option>
                                                        <option value="Cadiz">Cadiz</option>
                                                        <option value="Escalante">Escalante</option>
                                                        <option value="Himamaylan">Himamaylan</option>
                                                        <option value="Kabankalan">Kabankalan</option>
                                                        <option value="La Carlota">La Carlota</option>
                                                        <option value="Sagay">Sagay</option>
                                                        <option value="San Carlos">San Carlos</option>
                                                        <option value="Silay">Silay</option>
                                                        <option value="Sipalay">Sipalay</option>
                                                        <option value="Talisay">Talisay</option>
                                                        <option value="Victorias">Victorias</option>
                                                        <option value="Bais">Bais</option>
                                                        <option value="Bayawan">Bayawan</option>
                                                        <option value="Canlaon">Canlaon</option>
                                                        <option value="Dumaguete">Dumaguete</option>
                                                        <option value="Guihulngan">Guihulngan</option>
                                                        <option value="Tanjay">Tanjay</option>
                                                        <option value="Cabanatuan">Cabanatuan</option>
                                                        <option value="Gapan">Gapan</option>
                                                        <option value="Muñoz">Muñoz</option>
                                                        <option value="Palayan">Palayan</option>
                                                        <option value="San Jose">San Jose</option>
                                                        <option value="Calapan	Oriental">Calapan	Oriental</option>
                                                        <option value="Puerto Princesa">Puerto Princesa</option>
                                                        <option value="Angeles">Angeles</option>
                                                        <option value="Mabalacat ">Mabalacat </option>
                                                        <option value="San Fernando">San Fernando</option>
                                                        <option value="Alaminos">Alaminos</option>
                                                        <option value="Dagupan">Dagupan</option>
                                                        <option value="San Carlos">San Carlos</option>
                                                        <option value="Urdaneta">Urdaneta</option>
                                                        <option value="Lucena">Lucena</option>
                                                        <option value="Tayabas">Tayabas</option>
                                                        <option value="Antipolo">Antipolo</option>
                                                        <option value="Calbayog">Calbayog</option>
                                                        <option value="Catbalogan">Catbalogan</option>
                                                        <option value="Sorsogon City">Sorsogon City</option>
                                                        <option value="General Santos">General Santos</option>
                                                        <option value="Koronadal">Koronadal</option>
                                                        <option value="Maasin">Maasin</option>
                                                        <option value="Tacurong">Tacurong</option>
                                                        <option value="Surigao City">Surigao City</option>
                                                        <option value="Bislig">Bislig</option>
                                                        <option value="Tandag">Tandag</option>
                                                        <option value="Tarlac City">Tarlac City</option>
                                                        <option value="Olongapo">Olongapo</option>
                                                        <option value="Dapitan">Dapitan</option>
                                                        <option value="Dipolog">Dipolog</option>
                                                        <option value="Pagadian">Pagadian</option>
                                                        <option value="Zamboanga City">Zamboanga City</option>
                                                    </select>



                                                    <br />

                                                    <div class="text-center">
                                                        <input type="submit" id="d_submit" value="Send" class="btn btn-primary my-4" />
                                                    </div>
                                                </form>





                                            </div>
                                        </div>



                                    </div>

                                </div>



                            </div>
                        </div>
                    </div>
















                    <div class="modal fade" id="modal-project" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true">
                        <div class="modal-dialog modal- modal-dialog-centered modal-sm" role="document">


                            <div class="modal-content">
                                <div id="RegistrationForm">
                                    <div class="modal-body p-0">


                                        <div class="card bg-secondary shadow border-0">
                                            <div class="card-header bg-white pb-3">

                                                <div class="btn-wrapper text-center">
                                                    <h3>Assign Messenger</h3>

                                                </div>
                                            </div>
                                            <div class="card-body px-lg-5 py-lg-3">


                                                <form role="form" id="messenger_form" enctype="multipart/form-data">

                                                    <label>For Pick Up</label>

                                                    <input type="text" readonly class="form-control" id="projectid" />
                                                    <br />
                                                    <label>Messengers</label>
                                                    <select name="messenger" id="messenger" class="form-control">
                                                        @{
                                                            foreach (var m in UserRepository.GetAll().Where(a => a.Role == "Messenger").ToList())
                                                            {
                                                                <option value="@m.UserID">@m.FirstName @m.MiddleName  @m.LastName  </option>
                                                            }
                                                        }
                                                    </select>

                                                    <br />
                                                    <label>Quantity</label>
                                                    <input type="number" readonly id="quantity" class="form-control" />

                                                    <label>Client Address</label>
                                                    <input type="text" readonly id="client-address" class="form-control" />
                                                    <br />
                                                    <select class="form-control" name="cities" id="location">
                                                        <option value="Caloocan">Caloocan</option>
                                                        <option value="Las Piñas">Las Piñas</option>
                                                        <option value="Makati ">Makati </option>
                                                        <option value="Malabon">Malabon</option>
                                                        <option value="Mandaluyong">Mandaluyong</option>
                                                        <option value="Manila">Manila</option>
                                                        <option value="Marikina">Marikina</option>
                                                        <option value="Muntinlupa">Muntinlupa</option>
                                                        <option value="Navotas">Navotas</option>
                                                        <option value="Parañaque">Parañaque</option>
                                                        <option value="Pasay">Pasay</option>
                                                        <option value="Pasig ">Pasig </option>
                                                        <option value="Quezon City">Quezon City</option>
                                                        <option value="San Juan">San Juan</option>
                                                        <option value="Taguig">Taguig</option>
                                                        <option value="Valenzuela">Valenzuela</option>
                                                        <option value="Butuan">Butuan</option>
                                                        <option value="Cabadbaran">Cabadbaran</option>
                                                        <option value="Bayugan">Bayugan</option>
                                                        <option value="Legazpi">Legazpi</option>
                                                        <option value="Ligao">Ligao</option>
                                                        <option value="Tabaco">Tabaco</option>
                                                        <option value="Isabela">Isabela</option>
                                                        <option value="Lamitan">Lamitan</option>
                                                        <option value="Balanga">Balanga</option>
                                                        <option value="Batangas City">Batangas City</option>
                                                        <option value="Lipa">Lipa</option>
                                                        <option value="Tanauan">Tanauan</option>
                                                        <option value="Baguio">Baguio</option>
                                                        <option value="Tagbilaran">Tagbilaran</option>
                                                        <option value="Malaybalay">Malaybalay</option>
                                                        <option value="Valencia">Valencia</option>
                                                        <option value="Malolos">Malolos</option>
                                                        <option value="Meycauayan">Meycauayan</option>
                                                        <option value="San Jose del Monte">San Jose del Monte</option>
                                                        <option value="Tuguegarao">Tuguegarao</option>
                                                        <option value="Iriga">Iriga</option>
                                                        <option value="Naga">Naga</option>
                                                        <option value="Roxas">Roxas</option>
                                                        <option value="Bacoor">Bacoor</option>
                                                        <option value="Cavite City">Cavite City</option>
                                                        <option value="Dasmariñas">Dasmariñas</option>
                                                        <option value="Imus">Imus</option>
                                                        <option value="Tagaytay">Tagaytay</option>
                                                        <option value="Trece Martires">Trece Martires</option>
                                                        <option value="Bogo">Bogo</option>
                                                        <option value="Carcar">Carcar</option>
                                                        <option value="Cebu City">Cebu City</option>
                                                        <option value="Danao">Danao</option>
                                                        <option value="Lapu-Lapu">Lapu-Lapu</option>
                                                        <option value="Mandaue">Mandaue</option>
                                                        <option value="Naga">Naga</option>
                                                        <option value="Talisay">Talisay</option>
                                                        <option value="Toledo">Toledo</option>
                                                        <option value="Kidapawan">Kidapawan</option>
                                                        <option value="Panabo">Panabo</option>
                                                        <option value="Samal">Samal</option>
                                                        <option value="Tagum">Tagum</option>
                                                        <option value="Davao City">Davao City</option>
                                                        <option value="Digos">Digos</option>
                                                        <option value="Mati">Mati</option>
                                                        <option value="Borongan">Borongan</option>
                                                        <option value="Batac">Batac</option>
                                                        <option value="Laoag">Laoag</option>
                                                        <option value="Candon">Candon</option>
                                                        <option value="Vigan">Vigan</option>
                                                        <option value="Iloilo City">Iloilo City</option>
                                                        <option value="Passi">Passi</option>
                                                        <option value="Cauayan">Cauayan</option>
                                                        <option value="Ilagan">Ilagan</option>
                                                        <option value="Santiago">Santiago</option>
                                                        <option value="Tabuk">Tabuk</option>
                                                        <option value="San Fernando">San Fernando</option>
                                                        <option value="Biñan">Biñan</option>
                                                        <option value="Cabuyao">Cabuyao</option>
                                                        <option value="Calamba">Calamba</option>
                                                        <option value="San Pablo">San Pablo</option>
                                                        <option value="Santa Rosa">Santa Rosa</option>
                                                        <option value="San Pedro">San Pedro</option>
                                                        <option value="Iligan">Iligan</option>
                                                        <option value="Marawi">Marawi</option>
                                                        <option value="Baybay">Baybay</option>
                                                        <option value="Ormoc">Ormoc</option>
                                                        <option value="Tacloban">Tacloban</option>
                                                        <option value="Cotabato City">Cotabato City</option>
                                                        <option value="Masbate City">Masbate City</option>
                                                        <option value="Oroquieta">Oroquieta</option>
                                                        <option value="Ozamiz">Ozamiz</option>
                                                        <option value="Tangub">Tangub</option>
                                                        <option value="Cagayan de Oro">Cagayan de Oro</option>
                                                        <option value="El Salvador">El Salvador</option>
                                                        <option value="Gingoog">Gingoog</option>
                                                        <option value="Bacolod">Bacolod</option>
                                                        <option value="Bago">Bago</option>
                                                        <option value="Cadiz">Cadiz</option>
                                                        <option value="Escalante">Escalante</option>
                                                        <option value="Himamaylan">Himamaylan</option>
                                                        <option value="Kabankalan">Kabankalan</option>
                                                        <option value="La Carlota">La Carlota</option>
                                                        <option value="Sagay">Sagay</option>
                                                        <option value="San Carlos">San Carlos</option>
                                                        <option value="Silay">Silay</option>
                                                        <option value="Sipalay">Sipalay</option>
                                                        <option value="Talisay">Talisay</option>
                                                        <option value="Victorias">Victorias</option>
                                                        <option value="Bais">Bais</option>
                                                        <option value="Bayawan">Bayawan</option>
                                                        <option value="Canlaon">Canlaon</option>
                                                        <option value="Dumaguete">Dumaguete</option>
                                                        <option value="Guihulngan">Guihulngan</option>
                                                        <option value="Tanjay">Tanjay</option>
                                                        <option value="Cabanatuan">Cabanatuan</option>
                                                        <option value="Gapan">Gapan</option>
                                                        <option value="Muñoz">Muñoz</option>
                                                        <option value="Palayan">Palayan</option>
                                                        <option value="San Jose">San Jose</option>
                                                        <option value="Calapan	Oriental">Calapan	Oriental</option>
                                                        <option value="Puerto Princesa">Puerto Princesa</option>
                                                        <option value="Angeles">Angeles</option>
                                                        <option value="Mabalacat ">Mabalacat </option>
                                                        <option value="San Fernando">San Fernando</option>
                                                        <option value="Alaminos">Alaminos</option>
                                                        <option value="Dagupan">Dagupan</option>
                                                        <option value="San Carlos">San Carlos</option>
                                                        <option value="Urdaneta">Urdaneta</option>
                                                        <option value="Lucena">Lucena</option>
                                                        <option value="Tayabas">Tayabas</option>
                                                        <option value="Antipolo">Antipolo</option>
                                                        <option value="Calbayog">Calbayog</option>
                                                        <option value="Catbalogan">Catbalogan</option>
                                                        <option value="Sorsogon City">Sorsogon City</option>
                                                        <option value="General Santos">General Santos</option>
                                                        <option value="Koronadal">Koronadal</option>
                                                        <option value="Maasin">Maasin</option>
                                                        <option value="Tacurong">Tacurong</option>
                                                        <option value="Surigao City">Surigao City</option>
                                                        <option value="Bislig">Bislig</option>
                                                        <option value="Tandag">Tandag</option>
                                                        <option value="Tarlac City">Tarlac City</option>
                                                        <option value="Olongapo">Olongapo</option>
                                                        <option value="Dapitan">Dapitan</option>
                                                        <option value="Dipolog">Dipolog</option>
                                                        <option value="Pagadian">Pagadian</option>
                                                        <option value="Zamboanga City">Zamboanga City</option>
                                                    </select>



                                                    <br />

                                                    <div class="text-center">
                                                        <input type="submit" id="submit" value="Send" class="btn btn-primary my-4" />
                                                    </div>
                                                </form>





                                            </div>
                                        </div>



                                    </div>

                                </div>



                            </div>
                        </div>
                    </div>


                </div>
                <div class="card-header border-0">
                    <h3 class="mb-0">Projects</h3>
                    <br />
                    <a asp-action="AdminArchivePage " asp-controller="Project" style="width:10%;" class="btn btn-block"> Archive Projects </a>
                </div>
                <div style="padding:2%;" class="table-responsive">
                    <table id="projectTable" class="table align-items-center table-flush">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">Project ID</th>
                                <th scope="col">ProjectName</th>

                                <th scope="col">Quantity</th>
                                <th scope="col">Type  </th>
                                <th scope="col">Status  </th>

                                <th scope="col">Date  </th>
                                <th scope="col">Action  </th>
                                <th scope="col">  </th>
                            </tr>
                        </thead>
                        <tbody>

                            @{
                                foreach (var project in Model)
                                {
                                    <tr>
                                        <td>
                                            @project.ProjectID
                                        </td>
                                        <td>
                                            @project.ProjectName
                                        </td>

                                        <td>
                                            @project.Quantity
                                        </td>

                                        <td>
                                            @project.TypeOfTask
                                        </td>

                                        <td>
                                            @project.Status
                                        </td>
                                        <td>
                                            @project.CurrentDateStart.ToShortDateString()
                                        </td>
                                        <td>
                                            @{
                                                if (project.Status != "Completed" && project.Status != "On-going" && project.TypeOfTask == "Pick-up")
                                                {
                                                    <button type="button" onclick="PickUp(@project.ProjectID, @project.Quantity, '@UserRepository.FindUser(a => a.Email == project.Email).Address' )" class="btn btn-block" data-toggle="modal" data-target="#modal-project">Set pick-up</button>
                                                }

                                                if (project.Status == "Pending" && project.TypeOfTask == "Delivery")
                                                {
                                                    <button type="button" onclick="Delivery(@project.ProjectID, @project.Quantity )" class="btn btn-block" data-toggle="modal" data-target="#modal-delivery">Set Delivery</button>
                                                }

                                                if(project.Status == "Completed")
                                                {
                                                    <a class="btn btn-block" asp-action="AdminUnArchived" asp-controller="Project" asp-route-id="@project.ProjectID" > UnArchive </a>
                                                }

                                            }


                                        </td>

                                        <td>

                                            @{

                                                if (project.TypeOfTask == "Delivery")
                                                {
                                                    <button data-toggle="modal" data-target="#modal-form" onclick="GetLetterDelivery(@project.ProjectID)" class="btn btn-primary">View</button>
                                                }
                                                else
                                                {
                                                    <button data-toggle="modal" data-target="#modal-form" onclick="GetClient(@project.ProjectID)" class="btn btn-primary">View</button>
                                                }
                                            }

                                        </td>

                                    </tr>

                                }

                            }



                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    <!-- Dark table -->


</div>



<script>



    function GetClient(id) {
        var table = $('#soaTable').DataTable();

        $('#projectId').val(id);
        $('.letterData').html('');

        table.clear().draw();
        $.ajax({

            url: '/Project/GetLetterProject',
            type: 'GET',
            data: { id: id },
            success: function (e) {

                for (var key of Object.keys(e)) {

                    table.row.add([

                        e[key].receiverName, e[key].locationOfDelivery
                    ]
                    ).draw();


                }


            }

        });
    }



    function GetLetterDelivery(id) {
        var table = $('#soaTable').DataTable();

        $('#projectId').val(id);
        $('.letterData').html('');
        table.clear().draw();
        $.ajax({

            url: '/Project/GetLetterDelivery',
            type: 'GET',
            data: { id: id },
            success: function (e) {

                for (var key of Object.keys(e)) {

                    table.row.add([

                        e[key].receiverName, e[key].locationOfDelivery
                    ]
                    ).draw();

                }


            }

        });
    }




    document.getElementById('messenger_form').onsubmit = function () {

        var xhr = new XMLHttpRequest();

        var formData = new FormData();

        var projectID = $('#projectid').val();
        var messenger = $('#messenger').val();
        var location = $('#location').val();


        formData.append("ProjectID", projectID);
        formData.append("Messenger", messenger);
        formData.append("Area", location);

        xhr.open('POST', '/Project/PickUp');
        xhr.send(formData);

        xhr.onreadystatechange = function () {

            if (xhr.readyState == 4 && xhr.status == 200) {

                if (xhr.responseText == "") {

                    Swal.fire(
                        'Good job!',
                        'On going pick up success.!',
                        'success'
                    );

                }

            }
        }
        return false;

    }



    document.getElementById('d_messenger_form').onsubmit = function () {

        var xhr = new XMLHttpRequest();

        var formData = new FormData();

        var projectID = $('#d_projectid').val();
        var messenger = $('#d_messenger').val();
        var location = $('#d_location').val();


        formData.append("ProjectID", projectID);
        formData.append("Messenger", messenger);
        formData.append("Area", location);

        xhr.open('POST', '/Project/Delivery');
        xhr.send(formData);

        xhr.onreadystatechange = function () {

            if (xhr.readyState == 4 && xhr.status == 200) {

                if (xhr.responseText == "") {

                    Swal.fire(
                        'Good job!',
                        'On going delivery success.!',
                        'success'
                    );

                }

            }
        }
        return false;

    }


    $(document).ready(function () {
        var table = $('#projectTable').DataTable({

            order: [[0, "desc"]],
            dom: 'lBfrtip',
            buttons: [
                {
                    extend: 'print',

                    customize: function (win) {
                        $(win.document.body)
                            .css({ 'font-size': '10pt' })
                            .prepend('<img style= src="~/logo.png" style="position:absolute; height:500px; z-index:5000; width:500px; top:0; left:0;" />'
                            );
                    }
                }
            ],
            drawCallback: function () {

                var next = $("#projectTable_next > a");
                next.text('>');

                var ss = $("#projectTable_previous > a");
                ss.text('<');
            }

        });
        $('.custom-select').removeClass("custom-select");
    });



    function PickUp(id, quantity, address) {
        $('#projectid').val(id);
        $('#quantity').val(quantity);
        $('#client-address').val(address);
    }
    function Delivery(id, quantity) {
        $('#d_projectid').val(id);
        $('#d_quantity').val(quantity);
    }


</script>